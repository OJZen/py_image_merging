# 智能海报/详情页批量生成器 (Smart Poster Generator)

这是一个基于 Python (PySide6 + Pillow) 开发的桌面应用程序。它可以自动将多张图片（推荐 16:9 比例）拼接成高质量的垂直长图。程序内置了智能布局算法，能够根据图片数量自动适配最佳的排列方式（海报模式或详情页模式），并支持批量处理。

## ✨ 主要功能

  * **智能排版**：根据图片数量（5\~10张）自动切换布局策略。
      * **5张**：海报风格（上大下小，宽间距，视觉偏下）。
      * **6-10张**：详情页风格（紧凑布局，最大化利用画面，防止留白过多）。
  * **高度自适应**：采用“垂直优先”算法，确保无论图片多高，都能完美塞入画布（1200x1600px），底部不被裁剪。
  * **美化效果**：自动为每张图片添加自然柔和的投影（Drop Shadow）和圆角处理。
  * **批量处理**：支持通过指令（如 `5 5 8`）一次性处理文件夹内的数十张图片，自动切分并生成多张长图。
  * **GUI 界面**：提供直观的 Qt 图形界面，操作简单，包含输入校验和错误提示。

## 🛠️ 环境要求与安装

确保你的电脑上安装了 Python 3.8 或更高版本。

1.  **克隆或下载本项目**

2.  **安装依赖库**
    打开终端或命令行，运行以下命令：

    ```bash
    pip install PySide6 Pillow
    ```

## 📂 项目结构

```text
Project/
├── gui_main.py      # [入口] 图形界面主程序
├── poster_core.py   # [核心] 图像处理与布局算法引擎
├── main.py          # [可选] 命令行版本入口
├── pic/             # [示例] 存放原始图片的文件夹
│   └── ...
└── README.md        # 说明文档
```

## 🚀 使用指南

### 1\. 启动程序

在终端中运行：

```bash
python main.py
```

### 2\. 操作步骤

1.  **选择文件夹**：点击“选择...”按钮，选中包含原始素材图片的文件夹（程序会自动按文件名排序读取）。
2.  **输入生成序列**：在文本框中输入你希望生成的图片数量序列，用空格分隔。
      * *示例*：`5 5 6`
      * *含义*：
          * 第 1 张长图使用前 5 张素材。
          * 第 2 张长图使用接下来的 5 张素材。
          * 第 3 张长图使用接下来的 6 张素材。
3.  **开始生成**：点击按钮，程序开始处理。
4.  **查看结果**：生成的图片将保存在原图片目录下的 `output` 文件夹中。

### 3\. 输出文件命名

生成的文件名格式为：
`template_[数量]_[日期]_[序号].png`

例如：`template_5_20251212_1.png`

## 🎨 布局逻辑说明

程序根据单张长图包含的素材数量，应用不同的样式：

| 图片数量 | 风格名称 | 布局特点 | 适用场景 |
| :--- | :--- | :--- | :--- |
| **5 张** | **Poster (海报)** | 顶部大图 + 底部四宫格。间距较大(50px)，整体布局偏下(0.618)，留白多。 | 电影海报、封面、宣发主图 |
| **7, 9 张** | **Dense (紧凑)** | 顶部大图 + 底部多行网格。间距极小(25px)，撑满画面。 | 产品详情页、多图展示 |
| **6, 8, 10 张** | **Dense (紧凑)** | 左右完全对称网格。间距极小(25px)，撑满画面。 | 侧重细节展示、对比图 |

## ⚠️ 注意事项

1.  **图片排序**：程序默认按照文件名的 ASCII 顺序读取图片（如 `1.jpg`, `2.jpg`, `10.jpg`）。建议使用 `01.jpg`, `02.jpg` ... `10.jpg` 的命名方式以保证顺序正确。
2.  **子目录**：程序只会读取选中文件夹根目录下的图片，**不会**递归读取子文件夹。
3.  **最小限制**：单张长图至少需要 **5** 张素材。

-----

**Enjoy creating posters\!**